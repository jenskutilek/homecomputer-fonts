<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="language" content="en">
		<meta name="format-detection" content="telephone=no">
		<style type="text/css">
@font-face {
	font-family: "Workbench Web";
	src: url("../Workbench/fonts/webfonts/Workbench[BLED,SCAN].woff2") format("woff2");
}

:root {
	--light-blue: #fff;
	--dark-blue: #083ccf;

	--bleed: 0;
	--scan: 0;
}

body {
	background: #202020;
	font-family: "Workbench Web";
	font-size: 24px;
	margin: 0;
	padding: 1em;
}

#screen {
	background: var(--dark-blue);
	/*background-image: linear-gradient(0deg, var(--light-blue) 33.33%, #000000 33.33%, #000000 50%, var(--light-blue) 50%, var(--light-blue) 83.33%, #000000 83.33%, #000000 100%);
	background-size: 6px 6px; */
	display: inline-block;
	margin: 0;
	padding: 3em;
}

div.controls {
	background: #404040;
	display: flex;
	flex-direction: column;
	font-variation-settings: "SCAN" 0, "BLED" 0;
	margin: 1em 0 0 0;
	padding: 1em;
}

div.controls > div {
	background: #808080;
	margin: 0;
	padding: 1em;
}

label {
	color: #f0f0f0;
	margin-left: 1em;
	padding: 0;
}

pre {
	background: var(--dark-blue);
	/* background-image: linear-gradient(0deg, var(--dark-blue) 33.33%, #000000 33.33%, #000000 50%, var(--dark-blue) 50%, var(--dark-blue) 83.33%, #000000 83.33%, #000000 100%);
	background-size: 6px 6px; */
	color: var(--light-blue);
	font-family: "Workbench Web";
	font-variation-settings: "BLED" var(--bleed), "SCAN" var(--scan);
	line-height: 1em;
	margin: 0;
	padding: 0;
	width: 40em;
	word-wrap: break-word;
}
		</style>
		<script type="text/javascript">
// Variable font settings

const changeScan = function (e) {
	html.style.setProperty("--scan", e.target.value);
}
const changeBleed = function (e) {
	html.style.setProperty("--bleed", e.target.value);
}

// Box shadow

const changeGlow = function (e) {
	const v = e.target.value
	const shadow = "0 0 " + v + "em #68a4ff"
	document.querySelector('#screen').style.boxShadow = shadow
	document.querySelector('pre').style.boxShadow = shadow
	document.querySelector('pre').style.textShadow = shadow
}

// CSS filters

const changeBlur = function (e) {
	blur = e.target.value
	updateFilters()
}

const changeBrightness = function (e) {
	brightness = e.target.value
	updateFilters()
}

const changeContrast = function (e) {
	contrast = e.target.value
	updateFilters()
}

const changeSaturation = function (e) {
	saturation = e.target.value
	updateFilters()
}

const updateFilters = function () {
	console.log("updateFilters")
	const flt = "brightness(" + brightness + ") contrast(" + contrast + ") blur(" + blur + "px) saturate(" + saturation + ")"
	console.log(flt)
	document.querySelector('#screen').style.filter = flt
}


var html, brightness, blur, contrast, saturation

document.addEventListener("DOMContentLoaded", function() {
	html = document.querySelector('html')

	document.querySelector('#scan').addEventListener('input', changeScan)
	document.querySelector('#bleed').addEventListener('input', changeBleed)

	document.querySelector('#glow').addEventListener('input', changeGlow)

	brightness = document.querySelector('#brightness').value
	blur = document.querySelector('#blur').value
	contrast = document.querySelector('#contrast').value
	saturation = document.querySelector('#saturation').value

	document.querySelector('#blur').addEventListener('input', changeBlur)
	document.querySelector('#brightness').addEventListener('input', changeBrightness)
	document.querySelector('#contrast').addEventListener('input', changeContrast)
	document.querySelector('#saturation').addEventListener('input', changeSaturation)
})
		</script>
	</head>
	<body>
		<div id="screen">
			<pre contenteditable="true">
Amiga Workbench 1.3

Am Heimcomputer sitz’ ich hier
und programmier’ die Zukunft mir_
			</pre>
		</div>
		<div class="controls">
			<div><input type="range" id="bleed" min="0" max="100" step="1" value="0"><label for="bleed">Bleed</label></div>
			<div><input type="range" id="scan" min="-53" max="100" step="1" value="0"><label for="scan">Scanline</label></div>
			<div><input type="range" id="glow" min="0" max="0.8" step="0.01" value="0"><label for="glow">Glow</label></div>
			<div><input type="range" id="blur" min="0" max="5" step="1" value="0"><label for="blur">Blur</label></div>
			<div><input type="range" id="brightness" min="0.2" max="2" step="0.01" value="1"><label for="brightness">Brightness</label></div>
			<div><input type="range" id="contrast" min="0.1" max="5" step="0.01" value="1"><label for="contrast">Contrast</label></div>
			<div><input type="range" id="saturation" min="0" max="2" step="0.01" value="1"><label for="saturation">Saturation</label></div>
		</div>
	</body>
</html>
